#!/bin/sh

wm_name=${2:-openbox}

gen-xresources | xrdb -load -  # load Xresources

# key bindings
cat /home/kyle/.dotfiles/sxhkd/sxhkdrc.{base,$wm_name} > /tmp/sxhkdrc
sxhkd -c /tmp/sxhkdrc &

screenlayout.sh &   # screenlayout
wallpaper.sh &      # wallpaper
picom &             # compositor
xset r rate 200 70  # keyboard key repeat speed

(cd $HOME && tmux new -d -s base)
(cd $HOME/.dotfiles && tmux new -d -s config)

# create a tmux session for every project in ~/src
for d in $(ls $HOME/src 2> /dev/null); do
  init-workspace.sh $d
done

case $wm_name in
    i3)       exec i3 ;;
    openbox)  exec openbox-session ;;
    bspwm)    exec bspwm ;;
esac
